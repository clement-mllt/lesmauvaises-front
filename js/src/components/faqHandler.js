import Swiper from "swiper";
import "swiper/css";
import { letterSource } from "./letterSource";
import { prepareAnimationHandler } from "./prepareAnimationHandler";
import gsap from "gsap";
import { MorphSVGPlugin } from "gsap/MorphSVGPlugin.js";

export class faqHandler {
    static sliderFaq() {
        let upArrow = document.querySelector(".slider_arrow_up");
        let downArrow = document.querySelector(".slider_arrow_down");
        const swiper_categorie = new Swiper(".swiper_faq_response", {
            direction: "vertical",
            slidesPerView: "auto",
            loop: true,
            centeredSlides: true,
            fadeEffect: { crossFade: true },
        });

        const swiper_response = new Swiper(".swiper_faq_content", {
            direction: "vertical",
            spaceBetween: 0,
            loop: true,
            autoplay: false,
            fadeEffect: { crossFade: true },
        });

        upArrow.addEventListener("click", () => {
            swiper_categorie.slidePrev();
            swiper_response.slidePrev();
        });

        downArrow.addEventListener("click", () => {
            swiper_response.slideNext();
            swiper_categorie.slideNext();
        });
    }

    static sliderQuestionsNumber() {
        let accordeon = document.querySelectorAll(".elementor-accordion");

        accordeon.forEach((element) => {
            let accordeonItem = element.querySelectorAll(
                ".elementor-accordion-item"
            );

            accordeonItem.forEach((element, index) => {
                let slides = element.querySelectorAll(".swiper-slide svg");
                let count = index + 1;

                slides.forEach((svgElement) => {
                    const newElement = document.createElement("h2");
                    newElement.className =
                        "elementor-heading-title elementor-size-default questions-number";
                    if (count < 10) {
                        newElement.textContent = "0" + count;
                    } else {
                        newElement.textContent = count;
                    }

                    if (svgElement && svgElement.parentNode) {
                        svgElement.parentNode.replaceChild(
                            newElement,
                            svgElement
                        );
                    }
                });
            });
        });
    }

    static writeSubtitle() {
        const currentIndexColor = localStorage.getItem("currentColorIndex");
        const currentColor = prepareAnimationHandler.colors[currentIndexColor];
        letterSource
            .getLetters("T,E,S,*,A,*,L,O,U,E,S,T,*,O,U,U,U,U")
            .then((letters) => {
                const container = document.querySelector(".faq-title");
                const svgHTML = letters
                    .map((svg) =>
                        svg != "*"
                            ? "<span>" + svg + "</span>"
                            : "<b class='space'></b>"
                    )
                    .join("");

                container.innerHTML += `<div class="lm-typo index rotate ro--4 z-9">${svgHTML}</div>`;
                const tlLetterSourceAnime =
                    prepareAnimationHandler.animeLetterSource(
                        container,
                        60,
                        0.25,
                        currentColor,
                        1.5
                    );
                return tlLetterSourceAnime.play();
            })
            .catch((error) => {
                console.error("Une erreur s'est produite :", error);
            });
    }

    static closeAccordionsOnLoad() {
        const accordions = document.querySelectorAll(
            ".elementor-accordion .elementor-tab-title"
        );
        accordions.forEach((accordion) => {
            accordion.classList.remove("elementor-active");

            const content = accordion.nextElementSibling;
            if (content) {
                content.style.display = "none";
            }
        });
    }

    static totalPoints = 8;
    static tubeHeight = 0;
    static currentPoints = 0;
    static lineHeight = 0;

    static setItemsAttributes() {
        const items = document.querySelectorAll(".elementor-accordion-item");
        const pointsDistribution = [
            0.5, 1, 1.5, 0.25, 0.75, 0.5, 1, 1.5, 0.25, 0.75,
        ];

        items.forEach((item, index) => {
            item.dataset.points = pointsDistribution[index];
            item.classList.add("clickable");
        });
    }

    static createConfetti() {
        const container = document.querySelector(".confettisContainer");
        const numberOfConfetti = 500;
        const startX = window.innerWidth / 2;
        const startY = 0;

        for (let i = 0; i < numberOfConfetti; i++) {
            const confetti = document.createElement("div");
            confetti.classList.add("confetti");
            container.appendChild(confetti);

            confetti.style.left = `${startX}px`;
            confetti.style.top = `${startY}px`;

            const angle = Math.random() * 360;
            const distance = Math.random() * window.innerWidth * 0.8 + 300;
            const xOffset = Math.cos(angle) * distance;
            const yOffset = Math.sin(angle) * distance;

            const size = Math.random() * 10 + 5;
            confetti.style.width = `${size}px`;
            confetti.style.height = `${size}px`;

            const randomBackground =
                prepareAnimationHandler.colors[
                    Math.floor(
                        Math.random() * prepareAnimationHandler.colors.length
                    )
                ];

            gsap.to(confetti, {
                opacity: 1,
                x: xOffset,
                y: yOffset + window.innerHeight,
                background: randomBackground,
                rotation: "+=720",
                duration: 1.2 + Math.random(),
                ease: "power2.out",
                onComplete: () => confetti.remove(),
            });
        }
    }

    static calculateLineHeight() {
        const container = document.querySelector(".tubeContainer");
        const containerHeight = container.getBoundingClientRect().height;
        const sizes = container.getBoundingClientRect();
        console.log(sizes);

        const offset = 50;
        const availableHeight = containerHeight - 10;

        if (!this.totalPoints) this.totalPoints = 8;
        this.lineHeight = availableHeight / this.totalPoints;
    }

    static calculateHeightIncrease(points) {
        return this.lineHeight * points;
    }

    static animateWave() {
        gsap.to(".tube", {
            duration: 0.025,
            repeat: -1,
            ease: "power2.inOut",
            onUpdate: function () {
                const wave = `
                polygon(
                  100% 100%, 0% 100%, 
                  0.00% ${Math.sin(Date.now() / 300) * 0.75 + 7.15}%, 
                  1.67% ${Math.sin(Date.now() / 300 + 0.3) * 0.75 + 6.85}%, 
                  3.33% ${Math.sin(Date.now() / 300 + 0.6) * 0.75 + 6.58}%, 
                  5.00% ${Math.sin(Date.now() / 300 + 0.9) * 0.75 + 6.34}%, 
                  6.67% ${Math.sin(Date.now() / 300 + 1.2) * 0.75 + 6.15}%, 
                  8.33% ${Math.sin(Date.now() / 300 + 1.5) * 0.75 + 6.02}%, 
                  10.00% ${Math.sin(Date.now() / 300 + 1.8) * 0.75 + 5.94}%, 
                  11.67% ${Math.sin(Date.now() / 300 + 2.1) * 0.75 + 5.93}%, 
                  13.33% ${Math.sin(Date.now() / 300 + 2.4) * 0.75 + 5.98}%, 
                  15.00% ${Math.sin(Date.now() / 300 + 2.7) * 0.75 + 6.1}%, 
                  16.67% ${Math.sin(Date.now() / 300 + 3.0) * 0.75 + 6.27}%, 
                  18.33% ${Math.sin(Date.now() / 300 + 3.3) * 0.75 + 6.5}%, 
                  20.00% ${Math.sin(Date.now() / 300 + 3.6) * 0.75 + 6.76}%, 
                  21.67% ${Math.sin(Date.now() / 300 + 3.9) * 0.75 + 7.05}%, 
                  23.33% ${Math.sin(Date.now() / 300 + 4.2) * 0.75 + 7.36}%, 
                  25.00% ${Math.sin(Date.now() / 300 + 4.5) * 0.75 + 7.66}%, 
                  26.67% ${Math.sin(Date.now() / 300 + 4.8) * 0.75 + 7.96}%, 
                  28.33% ${Math.sin(Date.now() / 300 + 5.1) * 0.75 + 8.24}%, 
                  30.00% ${Math.sin(Date.now() / 300 + 5.4) * 0.75 + 8.47}%, 
                  31.67% ${Math.sin(Date.now() / 300 + 5.7) * 0.75 + 8.66}%, 
                  33.33% ${Math.sin(Date.now() / 300 + 6.0) * 0.75 + 8.8}%, 
                  35.00% ${Math.sin(Date.now() / 300 + 6.3) * 0.75 + 8.87}%, 
                  36.67% ${Math.sin(Date.now() / 300 + 6.6) * 0.75 + 8.89}%, 
                  38.33% ${Math.sin(Date.now() / 300 + 6.9) * 0.75 + 8.83}%, 
                  40.00% ${Math.sin(Date.now() / 300 + 7.2) * 0.75 + 8.72}%, 
                  41.67% ${Math.sin(Date.now() / 300 + 7.5) * 0.75 + 8.54}%, 
                  43.33% ${Math.sin(Date.now() / 300 + 7.8) * 0.75 + 8.32}%, 
                  45.00% ${Math.sin(Date.now() / 300 + 8.1) * 0.75 + 8.06}%, 
                  46.67% ${Math.sin(Date.now() / 300 + 8.4) * 0.75 + 7.77}%, 
                  48.33% ${Math.sin(Date.now() / 300 + 8.7) * 0.75 + 7.46}%, 
                  50.00% ${Math.sin(Date.now() / 300 + 9.0) * 0.75 + 7.15}%, 
                  51.67% ${Math.sin(Date.now() / 300 + 9.3) * 0.75 + 6.85}%, 
                  53.33% ${Math.sin(Date.now() / 300 + 9.6) * 0.75 + 6.58}%, 
                  55.00% ${Math.sin(Date.now() / 300 + 9.9) * 0.75 + 6.34}%, 
                  56.67% ${Math.sin(Date.now() / 300 + 10.2) * 0.75 + 6.15}%, 
                  58.33% ${Math.sin(Date.now() / 300 + 10.5) * 0.75 + 6.02}%, 
                  60.00% ${Math.sin(Date.now() / 300 + 10.8) * 0.75 + 5.94}%, 
                  61.67% ${Math.sin(Date.now() / 300 + 11.1) * 0.75 + 5.93}%, 
                  63.33% ${Math.sin(Date.now() / 300 + 11.4) * 0.75 + 5.98}%, 
                  65.00% ${Math.sin(Date.now() / 300 + 11.7) * 0.75 + 6.1}%, 
                  66.67% ${Math.sin(Date.now() / 300 + 12.0) * 0.75 + 6.27}%, 
                  68.33% ${Math.sin(Date.now() / 300 + 12.3) * 0.75 + 6.5}%, 
                  70.00% ${Math.sin(Date.now() / 300 + 12.6) * 0.75 + 6.76}%, 
                  71.67% ${Math.sin(Date.now() / 300 + 12.9) * 0.75 + 7.05}%, 
                  73.33% ${Math.sin(Date.now() / 300 + 13.2) * 0.75 + 7.36}%, 
                  75.00% ${Math.sin(Date.now() / 300 + 13.5) * 0.75 + 7.66}%, 
                  76.67% ${Math.sin(Date.now() / 300 + 13.8) * 0.75 + 7.96}%, 
                  78.33% ${Math.sin(Date.now() / 300 + 14.1) * 0.75 + 8.24}%, 
                  80.00% ${Math.sin(Date.now() / 300 + 14.4) * 0.75 + 8.47}%, 
                  81.67% ${Math.sin(Date.now() / 300 + 14.7) * 0.75 + 8.66}%, 
                  83.33% ${Math.sin(Date.now() / 300 + 15.0) * 0.75 + 8.8}%, 
                  85.00% ${Math.sin(Date.now() / 300 + 15.3) * 0.75 + 8.87}%, 
                  86.67% ${Math.sin(Date.now() / 300 + 15.6) * 0.75 + 8.89}%, 
                  88.33% ${Math.sin(Date.now() / 300 + 15.9) * 0.75 + 8.83}%, 
                  90.00% ${Math.sin(Date.now() / 300 + 16.2) * 0.75 + 8.72}%, 
                  91.67% ${Math.sin(Date.now() / 300 + 16.5) * 0.75 + 8.54}%, 
                  93.33% ${Math.sin(Date.now() / 300 + 16.8) * 0.75 + 8.32}%, 
                  95.00% ${Math.sin(Date.now() / 300 + 17.1) * 0.75 + 8.06}%, 
                  96.67% ${Math.sin(Date.now() / 300 + 17.4) * 0.75 + 7.77}%, 
                  98.33% ${Math.sin(Date.now() / 300 + 17.7) * 0.75 + 7.46}%, 
                  100.00% ${Math.sin(Date.now() / 300 + 18.0) * 0.75 + 7.15}%
                )
              `;

                // Appliquer dynamiquement le clip-path animé
                document.querySelector(".tube").style.clipPath = wave;
            },
        });
    }

    static setupClickListeners() {
        const items = document.querySelectorAll(".elementor-accordion-item");
        const tube = document.querySelector(".tube");
        const lineSvg = `<svg width="809" height="32" viewBox="0 0 809 32" fill="none" xmlns="http://www.w3.org/2000/svg">
<mask id="mask0_1_14" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="809" height="32">
<path d="M119.848 31.2474C121.793 31.2961 123.737 31.3576 125.682 31.419C130.56 31.5732 135.437 31.7274 140.31 31.68C149.333 31.585 158.353 31.4174 167.372 31.2499C176.386 31.0824 185.398 30.915 194.41 30.82C204.327 30.7117 214.245 30.6604 224.162 30.6091C236.205 30.5468 248.248 30.4846 260.29 30.32C265.296 30.2516 270.298 29.8792 275.301 29.5067C277.614 29.3345 279.926 29.1623 282.24 29.0201C282.226 28.8216 282.213 28.6255 282.201 28.4305C282.188 28.2228 282.176 28.0164 282.16 27.81H241.2H200.14C200.14 27.8133 200.14 27.8166 200.14 27.8198L199.64 27.81V27.31H199.647C199.65 26.9667 199.65 26.6234 199.65 26.2801C217.748 25.6487 235.845 25.0223 254.003 24.3938C261.441 24.1364 268.888 23.8786 276.35 23.62C278.43 18.7 288.35 17.91 291.37 21.6M119.848 31.2474L72.4401 12.21C81.8259 11.9566 91.2098 11.6873 100.593 11.4181C112.315 11.0818 124.036 10.7455 135.76 10.44C138.226 10.3758 140.693 10.3108 143.159 10.2457C157.973 9.85505 172.788 9.46435 187.61 9.25003C201.683 9.04876 215.763 8.99131 229.839 8.93388C233.946 8.91712 238.053 8.90037 242.16 8.88004C246.607 8.85811 251.055 8.86155 255.503 8.865C263.229 8.87098 270.957 8.87696 278.68 8.75003C295.768 8.46603 312.856 8.15002 329.945 7.83402C355.576 7.36002 381.208 6.88602 406.84 6.52002C412.996 6.43156 419.157 6.61927 425.319 6.80702C430.999 6.98009 436.681 7.15319 442.36 7.11002C456.697 6.99351 471.039 6.70323 485.379 6.41298C491.963 6.27971 498.547 6.14646 505.13 6.03003C510.788 5.93003 516.446 5.84044 522.104 5.75084C533.986 5.56269 545.868 5.37454 557.75 5.09003C564.561 4.92922 571.372 4.69011 578.182 4.45101C585.772 4.18458 593.361 3.91815 600.95 3.76004C609.451 3.5847 617.955 3.50535 626.46 3.42598C633.963 3.35596 641.466 3.28594 648.97 3.15002C654.255 3.05361 659.539 2.88229 664.822 2.71098C671.594 2.49139 678.365 2.27181 685.14 2.21002C687.925 2.18585 690.712 2.43285 693.499 2.67977C696.475 2.94353 699.45 3.20719 702.42 3.14005C706.368 3.05264 710.311 2.72706 714.254 2.40149C718.431 2.05662 722.608 1.71175 726.79 1.65002M119.848 31.2474C120.218 31.0772 120.589 30.8969 120.953 30.7197C121.353 30.5251 121.745 30.3343 122.121 30.1644C123.2 29.6768 124.212 29.3248 125.191 29.32C132.671 29.3139 140.139 29.4611 147.614 29.6084C152.36 29.702 157.108 29.7955 161.864 29.85L161.866 29.85C162.581 29.8558 163.269 29.6357 163.899 29.3878C164.151 29.2888 164.386 29.1889 164.614 29.092C164.991 28.9319 165.348 28.7801 165.727 28.6547L166.101 28.5311L166.068 28.1385C166.054 27.9707 166.04 27.8022 166.026 27.6332L165.993 27.2338C165.968 26.9314 165.943 26.6287 165.918 26.3285L165.88 25.87H165.42H32.3312L119.848 31.2474ZM291.37 21.6C291.896 21.2614 292.388 20.8739 292.857 20.5049C293.842 19.7298 294.723 19.0365 295.59 19.05M291.37 21.6L291.757 21.2833C291.661 21.1655 291.558 21.0522 291.451 20.9434M291.37 21.6L291.099 21.1797C291.219 21.1024 291.336 21.0236 291.451 20.9434M295.59 19.05C297.482 19.0777 299.374 19.4945 301.476 19.9575C302.407 20.1625 303.379 20.3766 304.41 20.57M295.59 19.05L295.597 18.5501C297.01 18.5708 298.411 18.8008 299.864 19.099C300.437 19.2165 301.012 19.3431 301.598 19.4725C302.42 19.6535 303.266 19.84 304.167 20.0147M295.59 19.05L327.08 22.5504M304.41 20.57C306.22 17.49 309.81 17.2701 312.82 21.0201C313.477 21.8416 314.641 22.2553 315.803 22.6688C316.165 22.7973 316.526 22.9258 316.872 23.0665C316.882 22.8919 316.892 22.7168 316.903 22.5406M304.41 20.57L304.502 20.0786C304.39 20.0575 304.278 20.0362 304.167 20.0147M304.41 20.57L303.979 20.3167C304.04 20.2133 304.103 20.1126 304.167 20.0147M316.903 22.5406C317.068 22.6053 317.231 22.6729 317.392 22.7444C317.43 22.1057 317.47 21.4565 317.513 20.7651C317.552 20.1229 317.594 19.4442 317.639 18.7039C317.588 18.6845 317.537 18.665 317.487 18.6454L317.67 18.18L318.169 18.2098C318.166 18.2613 318.163 18.3125 318.16 18.3634C318.358 18.4349 318.568 18.508 318.785 18.5839C319.751 18.9211 320.875 19.3138 321.91 19.87C322.591 20.2369 323.243 20.7711 323.885 21.2974C324.942 22.1627 325.972 23.0065 327.06 23.05M316.903 22.5406C316.938 21.9577 316.975 21.3628 317.014 20.7334C317.062 19.9419 317.115 19.0959 317.171 18.1502L317.212 17.4629L317.853 17.7146C318.154 17.8329 318.512 17.9579 318.904 18.0951C319.882 18.4367 321.075 18.8538 322.147 19.4296L322.147 19.4299C322.875 19.822 323.581 20.4011 324.232 20.934C324.431 21.0975 324.625 21.2567 324.813 21.4048C325.664 22.0752 326.385 22.5226 327.08 22.5504M316.903 22.5406C316.704 22.4626 316.504 22.3888 316.305 22.3173C316.19 22.2759 316.077 22.2354 315.964 22.1954C315.653 22.0847 315.351 21.9773 315.056 21.8611C314.244 21.5417 313.603 21.1981 313.211 20.7077L313.21 20.7071C311.647 18.7597 309.871 17.7664 308.175 17.7339C306.568 17.7031 305.145 18.5372 304.167 20.0147M327.06 23.05C333.478 23.2885 339.9 23.3032 346.321 23.3179C349.595 23.3254 352.868 23.3329 356.14 23.37M327.06 23.05L327.08 22.5504M327.06 23.05L327.079 22.5504C327.079 22.5504 327.08 22.5504 327.08 22.5504M356.14 23.37C357.049 23.377 357.957 23.5907 358.866 23.8045C359.267 23.899 359.669 23.9934 360.07 24.07C360.04 24.37 360.013 24.67 359.985 24.97C359.958 25.27 359.93 25.57 359.9 25.87C358.361 25.87 356.823 25.8619 355.284 25.8538C351.693 25.8349 348.101 25.816 344.51 25.9001M356.14 23.37L356.144 22.87C356.144 22.87 356.145 22.87 356.145 22.87C356.851 22.8756 357.546 22.9967 358.211 23.1415C358.484 23.2007 358.744 23.262 358.999 23.3221C359.39 23.4142 359.769 23.5035 360.164 23.5789L360.613 23.6646L360.568 24.1198C360.538 24.4174 360.511 24.7153 360.483 25.0157C360.456 25.3153 360.428 25.6174 360.398 25.9198L360.353 26.37H359.9C358.356 26.37 356.814 26.3619 355.273 26.3538C351.685 26.3349 348.106 26.3161 344.522 26.3999M356.14 23.37L490.8 15.6516M344.51 25.9001C341.422 25.9755 338.338 26.1641 335.256 26.3525C334.015 26.4283 332.775 26.5041 331.535 26.5726C331.549 26.6349 331.562 26.6975 331.575 26.7602L331.625 26.9978C331.629 27.0211 331.634 27.0443 331.639 27.0676M344.51 25.9001L344.522 26.3999C344.522 26.3999 344.522 26.3999 344.522 26.3999M344.51 25.9001L344.522 26.3999M331.639 27.0676C331.471 27.0769 331.302 27.0861 331.134 27.0952C331.134 27.0968 331.135 27.0984 331.135 27.1C331.17 27.2675 331.205 27.435 331.24 27.6M331.639 27.0676C331.641 27.0784 331.644 27.0892 331.646 27.1M331.639 27.0676C332.861 26.9999 334.08 26.9254 335.297 26.8509C338.375 26.6628 341.443 26.4752 344.522 26.3999M331.24 27.6H431.49M331.24 27.6L331.729 27.4962C331.701 27.3655 331.674 27.2332 331.646 27.1M331.24 27.6V27.1H331.646M431.49 27.6C431.498 26.8467 431.5 26.0934 431.5 25.3401H431M431.49 27.6V27.1H430.995M431.49 27.6L430.99 27.5946C430.992 27.4297 430.993 27.2649 430.995 27.1M431 25.3401C431 25.1735 431 25.0068 431 24.8401H381.71H381.21V24.3401V22.95V22.45C381.377 22.45 381.543 22.45 381.71 22.45C384.148 22.4511 386.587 22.4598 389.025 22.4683C396.24 22.4937 403.455 22.519 410.67 22.35C412.077 22.317 413.472 21.7252 415.095 21.0361C415.929 20.6822 416.823 20.3027 417.81 19.9601C421.076 22.7433 426.627 22.3002 428.305 18.2915C428.231 18.121 428.158 17.9456 428.086 17.7653L428.55 17.58L429.032 17.7134C428.978 17.9093 428.916 18.0985 428.847 18.2814C430.752 22.5211 433.134 22.9301 434.91 20.4601C437.527 20.5692 440.019 20.7011 442.427 20.8285C447.518 21.0978 452.232 21.3472 456.95 21.32C461.929 21.2922 466.907 20.9831 472.011 20.6663C474.072 20.5383 476.154 20.4091 478.265 20.2966L478.249 20.2193C478.22 20.0809 478.191 19.9424 478.161 19.8014M431 25.3401H381.21H380.71V24.8401V24.8354V24.8307V24.826V24.8213V24.8166V24.8119V24.8073V24.8026V24.7979V24.7932V24.7885V24.7838V24.7791V24.7745V24.7698V24.7651V24.7604V24.7557V24.751V24.7464V24.7417V24.737V24.7323V24.7276V24.7229V24.7183V24.7136V24.7089V24.7042V24.6995V24.6949V24.6902V24.6855V24.6808V24.6761V24.6714V24.6668V24.6621V24.6574V24.6527V24.6481V24.6434V24.6387V24.634V24.6293V24.6247V24.62V24.6153V24.6106V24.6059V24.6013V24.5966V24.5919V24.5872V24.5826V24.5779V24.5732V24.5685V24.5639V24.5592V24.5545V24.5498V24.5452V24.5405V24.5358V24.5311V24.5265V24.5218V24.5171V24.5124V24.5078V24.5031V24.4984V24.4937V24.4891V24.4844V24.4797V24.4751V24.4704V24.4657V24.461V24.4564V24.4517V24.447V24.4424V24.4377V24.433V24.4283V24.4237V24.419V24.4143V24.4097V24.405V24.4003V24.3956V24.391V24.3863V24.3816V24.377V24.3723V24.3676V24.363V24.3583V24.3536V24.349V24.3443V24.3396V24.335V24.3303V24.3256V24.3209V24.3163V24.3116V24.3069V24.3023V24.2976V24.2929V24.2883V24.2836V24.2789V24.2743V24.2696V24.2649V24.2603V24.2556V24.2509V24.2463V24.2416V24.237V24.2323V24.2276V24.223V24.2183V24.2136V24.209V24.2043V24.1996V24.195V24.1903V24.1856V24.181V24.1763V24.1716V24.167V24.1623V24.1577V24.153V24.1483V24.1437V24.139V24.1343V24.1297V24.125V24.1203V24.1157V24.111V24.1064V24.1017V24.097V24.0924V24.0877V24.083V24.0784V24.0737V24.0691V24.0644V24.0597V24.0551V24.0504V24.0458V24.0411V24.0364V24.0318V24.0271V24.0224V24.0178V24.0131V24.0085V24.0038V23.9991V23.9945V23.9898V23.9852V23.9805V23.9758V23.9712V23.9665V23.9619V23.9572V23.9525V23.9479V23.9432V23.9386V23.9339V23.9292V23.9246V23.9199V23.9153V23.9106V23.9059V23.9013V23.8966V23.892V23.8873V23.8826V23.878V23.8733V23.8687V23.864V23.8593V23.8547V23.85V23.8454V23.8407V23.836V23.8314V23.8267V23.8221V23.8174V23.8128V23.8081V23.8034V23.7988V23.7941V23.7895V23.7848V23.7801V23.7755V23.7708V23.7662V23.7615V23.7568V23.7522V23.7475V23.7429V23.7382V23.7336V23.7289V23.7242V23.7196V23.7149V23.7103V23.7056V23.7009V23.6963V23.6916V23.687V23.6823V23.6777V23.673V23.6683V23.6637V23.659V23.6544V23.6497V23.6451V23.6404V23.6357V23.6311V23.6264V23.6218V23.6171V23.6124V23.6078V23.6031V23.5985V23.5938V23.5892V23.5845V23.5798V23.5752V23.5705V23.5659V23.5612V23.5565V23.5519V23.5472V23.5426V23.5379V23.5333V23.5286V23.5239V23.5193V23.5146V23.51V23.5053V23.5006V23.496V23.4913V23.4867V23.482V23.4773V23.4727V23.468V23.4634V23.4587V23.4541V23.4494V23.4447V23.4401V23.4354V23.4308V23.4261V23.4214V23.4168V23.4121V23.4075V23.4028V23.3981V23.3935V23.3888V23.3842V23.3795V23.3748V23.3702V23.3655V23.3609V23.3562V23.3515V23.3469V23.3422V23.3376V23.3329V23.3282V23.3236V23.3189V23.3143V23.3096V23.3049V23.3003V23.2956V23.291V23.2863V23.2816V23.277V23.2723V23.2677V23.263V23.2583V23.2537V23.249V23.2443V23.2397V23.235V23.2304V23.2257V23.221V23.2164V23.2117V23.2071V23.2024V23.1977V23.1931V23.1884V23.1837V23.1791V23.1744V23.1698V23.1651V23.1604V23.1558V23.1511V23.1464V23.1418V23.1371V23.1324V23.1278V23.1231V23.1185V23.1138V23.1091V23.1045V23.0998V23.0951V23.0905V23.0858V23.0811V23.0765V23.0718V23.0671V23.0625V23.0578V23.0531V23.0485V23.0438V23.0392V23.0345V23.0298V23.0252V23.0205V23.0158V23.0112V23.0065V23.0018V22.9972V22.9925V22.9878V22.9832V22.9785V22.9738V22.9692V22.9645V22.9598V22.9551V22.9505V22.9458V22.9411V22.9365V22.9318V22.9271V22.9225V22.9178V22.9131V22.9085V22.9038V22.8991V22.8945V22.8898V22.8851V22.8804V22.8758V22.8711V22.8664V22.8618V22.8571V22.8524V22.8477V22.8431V22.8384V22.8337V22.8291V22.8244V22.8197V22.815V22.8104V22.8057V22.801V22.7964V22.7917V22.787V22.7823V22.7777V22.773V22.7683V22.7636V22.759V22.7543V22.7496V22.7449V22.7403V22.7356V22.7309V22.7262V22.7216V22.7169V22.7122V22.7075V22.7029V22.6982V22.6935V22.6888V22.6842V22.6795V22.6748V22.6701V22.6654V22.6608V22.6561V22.6514V22.6467V22.642V22.6374V22.6327V22.628V22.6233V22.6187V22.614V22.6093V22.6046V22.5999V22.5952V22.5906V22.5859V22.5812V22.5765V22.5718V22.5672V22.5625V22.5578V22.5531V22.5484V22.5437V22.5391V22.5344V22.5297V22.525V22.5203V22.5156V22.511V22.5063V22.5016V22.4969V22.4922V22.4875V22.4828V22.4782V22.4735V22.4688V22.4641V22.4594V22.4547V22.45V21.95H381.21C383.819 21.95 386.426 21.9592 389.033 21.9683C396.246 21.9937 403.451 22.019 410.658 21.8501C411.628 21.8274 412.615 21.5124 413.761 21.0512C414.116 20.9082 414.489 20.7501 414.879 20.5845C415.72 20.2274 416.643 19.8358 417.646 19.4877L417.917 19.3938L418.134 19.5795C419.741 20.9485 421.95 21.4823 423.901 21.1281C425.837 20.7765 427.483 19.5618 428.068 17.4467L428.464 16.0154L429.014 17.3948C429.979 19.8139 431.034 21.0091 431.942 21.363C432.373 21.5311 432.789 21.518 433.2 21.3369C433.625 21.1501 434.07 20.7719 434.504 20.1681L434.662 19.9493L434.931 19.9605C437.561 20.0702 440.06 20.2025 442.471 20.33C447.553 20.5989 452.243 20.8471 456.947 20.82C461.911 20.7923 466.867 20.4846 471.964 20.1682C474.004 20.0415 476.066 19.9135 478.161 19.8014M431 25.3401C431 25.9276 430.999 26.514 430.995 27.1M478.161 19.8014C478.329 19.7924 478.498 19.7835 478.666 19.7748C478.447 18.7265 478.205 17.568 477.76 15.4035C477.66 15.3645 477.56 15.3254 477.458 15.2859L477.64 14.82L478.13 14.7194C478.152 14.8273 478.174 14.933 478.195 15.0364C480.017 15.747 481.613 16.3723 483.156 16.9771C484.679 17.5738 486.152 18.1507 487.74 18.7701M478.161 19.8014C477.927 18.6813 477.662 17.4123 477.15 14.9207L476.965 14.0204L477.822 14.3542C479.871 15.153 481.639 15.8455 483.342 16.5129C484.764 17.0702 486.142 17.61 487.602 18.1796M487.74 18.7701C487.858 18.6644 488.021 18.4593 488.221 18.2082C488.834 17.4371 489.791 16.233 490.84 16.15M487.74 18.7701L487.922 18.3042C487.815 18.2625 487.708 18.221 487.602 18.1796M487.74 18.7701L487.406 18.3976C487.452 18.3567 487.515 18.2851 487.602 18.1796M490.84 16.15C494.472 15.854 498.135 15.902 501.916 15.9516C503.209 15.9686 504.515 15.9857 505.839 15.9893C505.84 15.9779 505.84 15.9664 505.841 15.9549L506.34 15.99V16.49C506.328 16.49 506.317 16.49 506.305 16.49C506.231 17.5632 506.166 18.5743 506.092 19.74C506.259 19.7399 506.426 19.7393 506.593 19.7382M490.84 16.15L490.801 15.6516M490.84 16.15L490.799 15.6517C490.8 15.6517 490.8 15.6516 490.8 15.6516M506.593 19.7382C506.584 19.8726 506.576 20.009 506.567 20.1478L506.561 20.2384C507.87 20.2303 509.164 20.1921 510.447 20.1543C513.674 20.0592 516.823 19.9664 519.91 20.36C523.57 20.8237 527.099 19.3552 530.032 18.1345C530.704 17.8546 531.346 17.5876 531.95 17.36C540.16 14.27 547.71 15.85 554.92 17.73C563.61 19.99 571.91 20.5301 580.56 18.9001C581.025 18.815 581.505 18.8101 581.987 18.8051C582.468 18.8001 582.95 18.795 583.42 18.7101M506.593 19.7382C507.86 19.7296 509.126 19.6924 510.386 19.6553C513.633 19.5598 516.847 19.4653 519.973 19.864C522.119 20.1358 524.239 19.7137 526.247 19.0561C527.516 18.6405 528.691 18.1508 529.804 17.6873C530.481 17.405 531.136 17.1324 531.774 16.8921C540.143 13.7423 547.829 15.3643 555.046 17.2461C563.676 19.4904 571.9 20.0231 580.467 18.4087L580.47 18.4082C580.977 18.3155 581.494 18.3101 581.962 18.3053L581.981 18.3051C582.47 18.3 582.91 18.2942 583.331 18.218M506.593 19.7382C506.678 18.408 506.751 17.279 506.839 16.0251L506.877 15.49H506.34C504.86 15.49 503.396 15.4708 501.945 15.4518C498.156 15.4021 494.457 15.3536 490.801 15.6516M583.42 18.7101C585.525 18.326 587.625 17.9016 589.943 17.4331C590.884 17.2427 591.862 17.0451 592.89 16.84C592.953 16.8866 593.058 16.9945 593.199 17.139C593.753 17.7073 594.86 18.8427 596.12 19.05C599.6 19.62 603.2 19.62 606.75 19.56M583.42 18.7101L583.331 18.218M583.42 18.7101L583.33 18.2182C583.331 18.2181 583.331 18.2181 583.331 18.218M606.75 19.56C614.806 19.43 622.859 19.2699 630.912 19.1097C639.584 18.9373 648.256 18.7648 656.93 18.63C658.705 18.6028 660.485 18.8207 662.263 19.0384C663.099 19.1409 663.935 19.2433 664.77 19.32C664.75 19.77 664.74 20.21 664.73 20.66C653.863 20.9488 643 21.2401 632.137 21.5314C621.724 21.8106 611.312 22.0899 600.9 22.3667L600.915 22.8665M606.75 19.56L606.742 19.0601C614.787 18.9303 622.842 18.7701 630.899 18.6099C639.576 18.4374 648.255 18.2648 656.922 18.1301C658.732 18.1024 660.571 18.3273 662.367 18.547C663.195 18.6482 664.013 18.7483 664.816 18.8221L665.291 18.8658L665.27 19.3423C665.25 19.7859 665.24 20.2205 665.23 20.6711L665.219 21.1472L664.743 21.1598C653.876 21.4486 643.013 21.7399 632.151 22.0312C621.739 22.3104 611.328 22.5896 600.915 22.8665M606.75 19.56L606.742 19.0601C603.192 19.1201 599.632 19.1186 596.201 18.5566C595.55 18.4494 594.906 18.0286 594.355 17.5547C594.085 17.3229 593.851 17.09 593.66 16.8957C593.568 16.8018 593.478 16.7084 593.407 16.6372C593.341 16.5715 593.261 16.4929 593.188 16.4385L593.01 16.3063L592.792 16.3497C591.761 16.5554 590.781 16.7534 589.839 16.9439C587.524 17.4119 585.431 17.8349 583.331 18.218M600.915 22.8665C600.748 22.871 600.582 22.8754 600.415 22.8798L600.45 24.06M600.915 22.8665L600.938 23.6451M600.45 24.06C601.003 24.1602 601.555 24.2906 602.107 24.421C603.264 24.6941 604.419 24.9668 605.57 24.9601C631.25 24.7601 656.92 24.51 682.59 24.17M600.45 24.06L600.95 24.0452L600.938 23.6451M600.45 24.06L600.539 23.568C600.672 23.592 600.805 23.6179 600.938 23.6451M682.59 24.17C683.172 24.1607 683.827 24.1663 684.512 24.172C687.523 24.1973 691.114 24.2276 691.66 23.0301C693.984 17.9495 697.507 18.2844 701.052 18.6213C701.562 18.6698 702.072 18.7183 702.579 18.7507C703.139 18.5962 703.698 18.4419 704.257 18.288L704.39 18.7701L704.42 19.2692C703.828 19.3044 703.228 19.291 702.631 19.2549C700.235 19.9165 697.834 20.5828 695.433 21.2494C695.458 21.2771 695.483 21.3045 695.508 21.3316L695.509 21.3322L695.514 21.3381C695.546 21.3724 695.577 21.4064 695.608 21.44H696.615M682.59 24.17L682.582 23.6701C682.582 23.6701 682.582 23.6701 682.583 23.6701M682.59 24.17L682.583 23.6701C682.583 23.6701 682.583 23.6701 682.583 23.6701M696.615 21.44C696.287 21.5312 695.958 21.6224 695.63 21.7136L695.39 21.94M696.615 21.44H798.2M696.615 21.44C699.255 20.7076 701.892 19.9764 704.523 19.2521L704.36 18.2709C703.31 18.3335 702.22 18.23 701.084 18.1221L700.967 18.111C699.807 18.001 698.6 17.8924 697.43 17.9944C696.251 18.0974 695.089 18.4157 694.015 19.1712C692.943 19.9256 691.998 21.0894 691.205 22.8221L691.205 22.8227C691.139 22.9676 690.893 23.1707 690.271 23.3386C689.686 23.4966 688.91 23.5863 688.025 23.6332C686.908 23.6925 685.695 23.682 684.546 23.6721C683.857 23.6661 683.19 23.6604 682.583 23.6701M695.39 21.94V21.7801C695.351 21.7911 695.311 21.8021 695.272 21.813C695.311 21.8554 695.35 21.8977 695.39 21.94ZM695.39 21.94H798.69M798.69 21.94C798.7 21.485 798.708 21.0325 798.715 20.58C798.72 20.2936 798.725 20.0071 798.73 19.72H798.23M798.69 21.94V21.44H798.2M798.69 21.94L798.19 21.929C798.194 21.7658 798.197 21.6029 798.2 21.44M798.23 19.72C798.233 19.5537 798.236 19.387 798.24 19.22H758.44H757.94V18.72V17.48V16.98C759.434 16.98 760.926 16.9745 762.419 16.9689C765.402 16.9578 768.384 16.9467 771.37 16.98M798.23 19.72H757.94H757.44V19.22V19.2156V19.2112V19.2068V19.2024V19.198V19.1936V19.1892V19.1849V19.1805V19.1761V19.1717V19.1673V19.1629V19.1585V19.1541V19.1497V19.1453V19.1409V19.1365V19.1322V19.1278V19.1234V19.119V19.1146V19.1102V19.1058V19.1014V19.097V19.0927V19.0883V19.0839V19.0795V19.0751V19.0707V19.0663V19.0619V19.0576V19.0532V19.0488V19.0444V19.04V19.0356V19.0312V19.0269V19.0225V19.0181V19.0137V19.0093V19.0049V19.0005V18.9962V18.9918V18.9874V18.983V18.9786V18.9742V18.9699V18.9655V18.9611V18.9567V18.9523V18.9479V18.9436V18.9392V18.9348V18.9304V18.926V18.9217V18.9173V18.9129V18.9085V18.9041V18.8998V18.8954V18.891V18.8866V18.8822V18.8779V18.8735V18.8691V18.8647V18.8603V18.856V18.8516V18.8472V18.8428V18.8384V18.8341V18.8297V18.8253V18.8209V18.8166V18.8122V18.8078V18.8034V18.7991V18.7947V18.7903V18.7859V18.7815V18.7772V18.7728V18.7684V18.764V18.7597V18.7553V18.7509V18.7465V18.7422V18.7378V18.7334V18.729V18.7247V18.7203V18.7159V18.7115V18.7072V18.7028V18.6984V18.6941V18.6897V18.6853V18.6809V18.6766V18.6722V18.6678V18.6634V18.6591V18.6547V18.6503V18.646V18.6416V18.6372V18.6328V18.6285V18.6241V18.6197V18.6154V18.611V18.6066V18.6022V18.5979V18.5935V18.5891V18.5848V18.5804V18.576V18.5716V18.5673V18.5629V18.5585V18.5542V18.5498V18.5454V18.5411V18.5367V18.5323V18.5279V18.5236V18.5192V18.5148V18.5105V18.5061V18.5017V18.4974V18.493V18.4886V18.4843V18.4799V18.4755V18.4711V18.4668V18.4624V18.458V18.4537V18.4493V18.4449V18.4406V18.4362V18.4318V18.4275V18.4231V18.4187V18.4144V18.41V18.4056V18.4013V18.3969V18.3925V18.3882V18.3838V18.3794V18.3751V18.3707V18.3663V18.362V18.3576V18.3532V18.3489V18.3445V18.3401V18.3358V18.3314V18.327V18.3227V18.3183V18.3139V18.3096V18.3052V18.3008V18.2965V18.2921V18.2877V18.2834V18.279V18.2746V18.2703V18.2659V18.2615V18.2572V18.2528V18.2484V18.2441V18.2397V18.2353V18.231V18.2266V18.2222V18.2179V18.2135V18.2092V18.2048V18.2004V18.1961V18.1917V18.1873V18.183V18.1786V18.1742V18.1699V18.1655V18.1611V18.1568V18.1524V18.148V18.1437V18.1393V18.1349V18.1306V18.1262V18.1218V18.1175V18.1131V18.1088V18.1044V18.1V18.0957V18.0913V18.0869V18.0826V18.0782V18.0738V18.0695V18.0651V18.0607V18.0564V18.052V18.0476V18.0433V18.0389V18.0345V18.0302V18.0258V18.0214V18.0171V18.0127V18.0084V18.004V17.9996V17.9953V17.9909V17.9865V17.9822V17.9778V17.9734V17.9691V17.9647V17.9603V17.956V17.9516V17.9472V17.9429V17.9385V17.9341V17.9298V17.9254V17.921V17.9167V17.9123V17.9079V17.9036V17.8992V17.8948V17.8905V17.8861V17.8817V17.8774V17.873V17.8686V17.8643V17.8599V17.8555V17.8512V17.8468V17.8424V17.8381V17.8337V17.8293V17.825V17.8206V17.8162V17.8119V17.8075V17.8031V17.7988V17.7944V17.79V17.7857V17.7813V17.7769V17.7726V17.7682V17.7638V17.7595V17.7551V17.7507V17.7464V17.742V17.7376V17.7333V17.7289V17.7245V17.7202V17.7158V17.7114V17.7071V17.7027V17.6983V17.6939V17.6896V17.6852V17.6808V17.6765V17.6721V17.6677V17.6634V17.659V17.6546V17.6503V17.6459V17.6415V17.6371V17.6328V17.6284V17.624V17.6197V17.6153V17.6109V17.6065V17.6022V17.5978V17.5934V17.5891V17.5847V17.5803V17.5759V17.5716V17.5672V17.5628V17.5585V17.5541V17.5497V17.5453V17.541V17.5366V17.5322V17.5279V17.5235V17.5191V17.5147V17.5104V17.506V17.5016V17.4972V17.4929V17.4885V17.4841V17.4797V17.4754V17.471V17.4666V17.4622V17.4579V17.4535V17.4491V17.4447V17.4404V17.436V17.4316V17.4272V17.4229V17.4185V17.4141V17.4097V17.4054V17.401V17.3966V17.3922V17.3879V17.3835V17.3791V17.3747V17.3703V17.366V17.3616V17.3572V17.3528V17.3485V17.3441V17.3397V17.3353V17.3309V17.3266V17.3222V17.3178V17.3134V17.309V17.3047V17.3003V17.2959V17.2915V17.2871V17.2828V17.2784V17.274V17.2696V17.2652V17.2609V17.2565V17.2521V17.2477V17.2433V17.2389V17.2346V17.2302V17.2258V17.2214V17.217V17.2127V17.2083V17.2039V17.1995V17.1951V17.1907V17.1863V17.182V17.1776V17.1732V17.1688V17.1644V17.16V17.1556V17.1513V17.1469V17.1425V17.1381V17.1337V17.1293V17.1249V17.1206V17.1162V17.1118V17.1074V17.103V17.0986V17.0942V17.0898V17.0854V17.0811V17.0767V17.0723V17.0679V17.0635V17.0591V17.0547V17.0503V17.0459V17.0415V17.0372V17.0328V17.0284V17.024V17.0196V17.0152V17.0108V17.0064V17.002V16.9976V16.9932V16.9888V16.9844V16.98V16.48H757.94C759.43 16.48 760.92 16.4745 762.411 16.4689C765.397 16.4578 768.385 16.4467 771.375 16.4801M798.23 19.72C798.224 20.0047 798.22 20.2885 798.215 20.5717C798.21 20.8615 798.206 21.1506 798.2 21.44M771.37 16.98C773.868 17.0049 776.367 17.0557 778.866 17.1065C784.42 17.2195 789.975 17.3324 795.52 17.16M771.37 16.98L771.375 16.4801M771.37 16.98L771.376 16.4801C771.375 16.4801 771.375 16.4801 771.375 16.4801M795.52 17.16C797.58 17.09 801.46 14.55 801.35 14.22M795.52 17.16L795.505 16.6602M795.52 17.16L795.503 16.6603C795.503 16.6603 795.504 16.6603 795.505 16.6602M801.35 14.22C799.641 9.19217 802.718 6.89125 806.182 4.30105C806.802 3.83751 807.434 3.36471 808.054 2.86536C807.863 2.80066 807.677 2.73531 807.497 2.67009M801.35 14.22L800.876 14.3781C800.876 14.3791 800.876 14.38 800.877 14.3809L801.35 14.22ZM807.497 2.67009C807.65 2.54904 807.802 2.42651 807.954 2.30214C807.4 2.10824 806.899 1.91293 806.436 1.73244C805.259 1.27327 804.327 0.910034 803.4 0.910034C800.156 0.915258 796.912 1.01599 793.668 1.11673C790.702 1.20883 787.736 1.30093 784.77 1.32004C777.713 1.3675 770.656 1.3843 763.6 1.4011C751.328 1.43033 739.057 1.45955 726.79 1.65002M807.497 2.67009C807.043 2.50572 806.623 2.34211 806.237 2.19154C805.959 2.08321 805.699 1.98163 805.455 1.89137C804.647 1.5918 804.01 1.41003 803.401 1.41003C800.304 1.41502 797.206 1.50728 794.101 1.60355L793.681 1.61656C790.717 1.70861 787.746 1.80088 784.773 1.82003C777.712 1.86752 770.653 1.88432 763.596 1.90112C751.326 1.93033 739.062 1.95953 726.798 2.14996L726.79 1.65002M807.497 2.67009C806.966 3.09009 806.429 3.49231 805.893 3.89238C805.605 4.10833 805.317 4.32365 805.031 4.5408C803.998 5.32702 803.004 6.13178 802.205 7.0334C801.401 7.93994 800.781 8.95917 800.511 10.1781C800.254 11.3382 800.323 12.6397 800.799 14.1451M726.79 1.65002L726.797 2.14997C722.752 2.20968 718.708 2.53568 714.646 2.87084L714.289 2.90029C710.351 3.2255 706.394 3.55218 702.431 3.63992C699.525 3.70564 696.618 3.45782 693.74 3.20309L693.463 3.1786C690.67 2.93111 687.905 2.68604 685.145 2.71C678.367 2.77182 671.613 2.99095 664.851 3.21032C659.57 3.38168 654.284 3.55317 648.979 3.64994C641.458 3.78618 633.956 3.85612 626.458 3.92604C617.961 4.00525 609.47 4.08443 600.961 4.25993C593.765 4.40985 586.568 4.65722 579.368 4.90973L578.198 4.95075C571.389 5.18983 564.575 5.42901 557.762 5.58988C545.878 5.87445 533.993 6.06266 522.109 6.25082C516.452 6.34041 510.795 6.42999 505.139 6.52995C498.559 6.64633 491.976 6.77956 485.393 6.91281C471.051 7.20308 456.704 7.49347 442.364 7.61L442.364 7.61C436.675 7.65325 430.985 7.47988 425.307 7.30688L424.581 7.28479C418.659 7.10476 412.75 6.93515 406.847 7.01997C381.216 7.38596 355.586 7.85992 329.956 8.3339C312.868 8.6499 295.779 8.96592 278.688 9.24996C270.961 9.37694 263.225 9.37097 255.496 9.365C251.048 9.36157 246.603 9.35814 242.163 9.38003C238.055 9.40036 233.947 9.41712 229.839 9.43389C215.764 9.49132 201.688 9.54875 187.617 9.74998C172.798 9.96425 157.987 10.3549 143.173 10.7455C140.706 10.8106 138.24 10.8756 135.773 10.9399C124.048 11.2453 112.329 11.5816 100.609 11.9179C91.226 12.1871 81.8419 12.4563 72.4536 12.7098L72.4535 12.7098C66.7567 12.8626 61.0609 12.9817 55.3667 13.1008C42.4063 13.3718 29.4539 13.6427 16.5162 14.3093L605.566 24.4601C631.245 24.2601 656.914 24.01 682.583 23.6701M800.799 14.1451C800.723 14.2149 800.615 14.3038 800.475 14.4089C800.115 14.6789 799.595 15.0178 799.003 15.3521C798.411 15.6861 797.759 16.0091 797.135 16.2514C796.503 16.4968 795.936 16.6454 795.505 16.6602M800.799 14.1451C800.823 14.2213 800.849 14.298 800.875 14.3752C800.837 14.2583 800.856 14.1619 800.868 14.1187C800.881 14.0736 800.898 14.0468 800.901 14.0424C800.906 14.0338 800.898 14.0478 800.859 14.0875C800.842 14.1049 800.822 14.1241 800.799 14.1451ZM795.505 16.6602C789.973 16.8323 784.439 16.7197 778.892 16.6069C776.389 16.556 773.884 16.505 771.375 16.4801M600.938 23.6451L490.801 15.6516M490.801 15.6516L490.8 15.6516M490.8 15.6516C490.336 15.6885 489.915 15.8864 489.555 16.1323C489.193 16.3793 488.865 16.6932 488.581 17.0013C488.297 17.3101 488.044 17.6273 487.84 17.8835C487.746 18.0022 487.667 18.1004 487.602 18.1796M430.995 27.1H331.646M291.451 20.9434C290.616 20.1002 289.454 19.5243 288.17 19.1838C286.715 18.7979 285.064 18.7027 283.452 18.8844C280.385 19.2299 277.273 20.6086 276.025 23.131C268.667 23.386 261.323 23.6402 253.988 23.894C235.829 24.5225 217.731 25.1489 199.633 25.7804L199.15 25.7972V26.2801C199.15 26.7909 199.15 27.2959 199.14 27.8002L199.13 28.31H199.64H199.721H199.802H199.884H199.965H200.046H200.127H200.208H200.289H200.37H200.452H200.533H200.614H200.695H200.776H200.857H200.939H201.02H201.101H201.182H201.263H201.344H201.425H201.507H201.588H201.669H201.75H201.831H201.912H201.993H202.075H202.156H202.237H202.318H202.399H202.48H202.562H202.643H202.724H202.805H202.886H202.967H203.048H203.13H203.211H203.292H203.373H203.454H203.535H203.617H203.698H203.779H203.86H203.941H204.022H204.103H204.185H204.266H204.347H204.428H204.509H204.59H204.672H204.753H204.834H204.915H204.996H205.077H205.158H205.24H205.321H205.402H205.483H205.564H205.645H205.727H205.808H205.889H205.97H206.051H206.132H206.213H206.295H206.376H206.457H206.538H206.619H206.7H206.782H206.863H206.944H207.025H207.106H207.187H207.268H207.35H207.431H207.512H207.593H207.674H207.755H207.837H207.918H207.999H208.08H208.161H208.242H208.323H208.405H208.486H208.567H208.648H208.729H208.81H208.892H208.973H209.054H209.135H209.216H209.297H209.378H209.46H209.541H209.622H209.703H209.784H209.865H209.947H210.028H210.109H210.19H210.271H210.352H210.434H210.515H210.596H210.677H210.758H210.839H210.92H211.002H211.083H211.164H211.245H211.326H211.407H211.489H211.57H211.651H211.732H211.813H211.894H211.975H212.057H212.138H212.219H212.3H212.381H212.462H212.544H212.625H212.706H212.787H212.868H212.949H213.031H213.112H213.193H213.274H213.355H213.436H213.518H213.599H213.68H213.761H213.842H213.923H214.004H214.086H214.167H214.248H214.329H214.41H214.491H214.573H214.654H214.735H214.816H214.897H214.978H215.06H215.141H215.222H215.303H215.384H215.465H215.547H215.628H215.709H215.79H215.871H215.952H216.033H216.115H216.196H216.277H216.358H216.439H216.52H216.602H216.683H216.764H216.845H216.926H217.007H217.089H217.17H217.251H217.332H217.413H217.494H217.576H217.657H217.738H217.819H217.9H217.981H218.063H218.144H218.225H218.306H218.387H218.468H218.55H218.631H218.712H218.793H218.874H218.955H219.037H219.118H219.199H219.28H219.361H219.442H219.523H219.605H219.686H219.767H219.848H219.929H220.01H220.092H220.173H220.254H220.335H220.416H220.497H220.579H220.66H220.741H220.822H220.903H220.985H221.066H221.147H221.228H221.309H221.39H221.472H221.553H221.634H221.715H221.796H221.877H221.959H222.04H222.121H222.202H222.283H222.364H222.446H222.527H222.608H222.689H222.77H222.851H222.933H223.014H223.095H223.176H223.257H223.338H223.42H223.501H223.582H223.663H223.744H223.825H223.907H223.988H224.069H224.15H224.231H224.312H224.394H224.475H224.556H224.637H224.718H224.8H224.881H224.962H225.043H225.124H225.205H225.287H225.368H225.449H225.53H225.611H225.692H225.774H225.855H225.936H226.017H226.098H226.18H226.261H226.342H226.423H226.504H226.585H226.667H226.748H226.829H226.91H226.991H227.072H227.154H227.235H227.316H227.397H227.478H227.56H227.641H227.722H227.803H227.884H227.965H228.047H228.128H228.209H228.29H228.371H228.452H228.534H228.615H228.696H228.777H228.858H228.94H229.021H229.102H229.183H229.264H229.346H229.427H229.508H229.589H229.67H229.751H229.833H229.914H229.995H230.076H230.157H230.239H230.32H230.401H230.482H230.563H230.644H230.726H230.807H230.888H230.969H231.05H231.132H231.213H231.294H231.375H231.456H231.537H231.619H231.7H231.781H231.862H231.943H232.025H232.106H232.187H232.268H232.349H232.431H232.512H232.593H232.674H232.755H232.836H232.918H232.999H233.08H233.161H233.242H233.324H233.405H233.486H233.567H233.648H233.73H233.811H233.892H233.973H234.054H234.136H234.217H234.298H234.379H234.46H234.542H234.623H234.704H234.785H234.866H234.947H235.029H235.11H235.191H235.272H235.353H235.435H235.516H235.597H235.678H235.759H235.841H235.922H236.003H236.084H236.165H236.247H236.328H236.409H236.49H236.571H236.653H236.734H236.815H236.896H236.977H237.059H237.14H237.221H237.302H237.383H237.465H237.546H237.627H237.708H237.789H237.871H237.952H238.033H238.114H238.195H238.277H238.358H238.439H238.52H238.601H238.683H238.764H238.845H238.926H239.007H239.089H239.17H239.251H239.332H239.413H239.495H239.576H239.657H239.738H239.82H239.901H239.982H240.063H240.144H240.226H240.307H240.388H240.469H240.55H240.632H240.713H240.794H240.875H240.956H241.038H241.119H241.2H241.281H241.362H241.444H241.525H241.606H241.687H241.768H241.849H241.931H242.012H242.093H242.174H242.255H242.336H242.417H242.498H242.579H242.66H242.741H242.822H242.903H242.985H243.066H243.147H243.227H243.308H243.389H243.47H243.551H243.632H243.713H243.794H243.875H243.956H244.037H244.118H244.199H244.28H244.36H244.441H244.522H244.603H244.684H244.765H244.845H244.926H245.007H245.088H245.169H245.249H245.33H245.411H245.492H245.573H245.653H245.734H245.815H245.895H245.976H246.057H246.138H246.218H246.299H246.38H246.46H246.541H246.622H246.702H246.783H246.863H246.944H247.025H247.105H247.186H247.266H247.347H247.428H247.508H247.589H247.669H247.75H247.83H247.911H247.991H248.072H248.152H248.233H248.313H248.394H248.474H248.555H248.635H248.716H248.796H248.877H248.957H249.038H249.118H249.198H249.279H249.359H249.44H249.52H249.6H249.681H249.761H249.842H249.922H250.002H250.083H250.163H250.243H250.324H250.404H250.484H250.565H250.645H250.725H250.805H250.886H250.966H251.046H251.127H251.207H251.287H251.367H251.448H251.528H251.608H251.688H251.768H251.849H251.929H252.009H252.089H252.169L291.451 20.9434Z" fill="black" stroke="white"/>
</mask>
<g mask="url(#mask0_1_14)">
<path d="M817.5 17.5H-6" stroke="white" stroke-width="41"/>
</g>
</svg>
`;

        if (!this.currentPoints) this.currentPoints = 0;
        if (!this.totalPoints) this.totalPoints = 8;
        if (!this.tubeHeight) this.tubeHeight = 0;

        const scoreThresholds = [
            { score: 1, index: 1 },
            { score: 2.5, index: 2 },
            { score: 3, index: 3 },
            { score: 4.5, index: 4 },
            { score: 5.5, index: 5 },
            { score: 6.5, index: 6 },
            { score: 8, index: 7 },
        ];

        function updateOpacityBasedOnScore(currentScore) {
            scoreThresholds.forEach(({ score, index }) => {
                const commentElement =
                    document.querySelectorAll(".comment")[index - 1];
                if (commentElement) {
                    if (currentScore >= score) {
                        gsap.to(commentElement, {
                            opacity: 1,
                            duration: 0.5,
                            ease: "power2.out",
                        });
                    }
                }
            });
        }

        items.forEach((item, idx) => {
            const points = parseFloat(item.dataset.points);

            const pointsContainer = document.createElement("div");
            const lineSvgContainer = document.createElement("div");
            pointsContainer.classList.add("pointsContainer");
            lineSvgContainer.classList.add("lineSvgContainer");
            lineSvgContainer.innerHTML = lineSvg;
            item.appendChild(pointsContainer);
            item.appendChild(lineSvgContainer);

            const currentColorIndex = localStorage.getItem("currentColorIndex");
            const currentColor =
                prepareAnimationHandler.colors[currentColorIndex + 1];

            const pointsText = points.toString();
            const pointsCharacters = `${pointsText
                .split("")
                .map((char) => (char === "." ? "VIRGULE" : char))},*,P,T`;

            letterSource.getLetters(pointsCharacters).then((letters) => {
                const svgHTML = letters
                    .map((svg) =>
                        svg != "*"
                            ? "<span>" + svg + "</span>"
                            : "<b class='space'></b>"
                    )
                    .join("");

                pointsContainer.innerHTML += `<div class="lm-typo index z-9">${svgHTML}</div>`;
                const tlLetterSourceAnime =
                    prepareAnimationHandler.animeLetterSource(
                        pointsContainer,
                        16,
                        0.25,
                        "#CDDD20",
                        1.6
                    );
                return tlLetterSourceAnime.play();
            });

            const svgPaths = lineSvgContainer.querySelectorAll("path");
            svgPaths.forEach((path) => {
                gsap.set(path, { drawSVG: "0%" });
            });

            const picturesContainer =
                document.querySelector(".picturesContainer");
            const pictures = picturesContainer.querySelectorAll(
                ".pictureWrapper img"
            );

            pictures.forEach((picture) => {
                gsap.set(picture, { opacity: 0, y: 100 });
            });

            item.addEventListener("click", () => {
                if (points > 0 && !item.classList.contains("clicked")) {
                    this.currentPoints =
                        Math.round((this.currentPoints + points) * 10) / 10;
                    this.tubeHeight += this.calculateHeightIncrease(points);
                    item.classList.add("clicked");

                    gsap.to(tube, {
                        height: `${this.tubeHeight}px`,
                        transformOrigin: "bottom",
                        duration: 0.25,
                        ease: "back.out",
                        onComplete: () => {
                            updateOpacityBasedOnScore(this.currentPoints);

                            svgPaths.forEach((path) => {
                                gsap.to(path, {
                                    drawSVG: "100% 0%",
                                    stroke: currentColor,
                                    duration: 0.5,
                                    ease: "power2.out",
                                });
                            });
                        },
                    });

                    if (this.currentPoints >= this.totalPoints) {
                        this.createConfetti();
                    }
                }
                gsap.to(pictures[idx], {
                    opacity: 1,
                    y: 0,
                    duration: 0.25,
                    ease: "back.out",
                });
            });
        });
    }

    static dispatchLines() {
        const container = document.querySelector(".tubeContainer");
        const sizes = container.getBoundingClientRect();
        const textSteps = document.querySelectorAll(".comment");
        const { height } = sizes;

        const numLines = this.totalPoints;

        const offset = 50;

        const availableHeight = height - offset;

        const svgLine = `<svg class="line" width="127" height="6" viewBox="0 0 127 6" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M107.848 5.09032C107.508 4.95928 107.167 4.71749 106.827 4.71593C104.919 4.71437 103.012 4.77676 101.105 4.7986C100.913 4.80016 100.721 4.68005 100.527 4.61609C100.535 4.52249 100.543 4.42733 100.551 4.33373H121.558C121.205 4.08413 121.091 4.00301 120.917 3.87977C121.505 3.93125 122.094 3.56777 122.458 4.34465C122.536 4.51157 123.185 4.41329 123.712 4.44605C123.556 4.18397 123.481 4.0576 123.394 3.91096C124.342 3.8392 125.263 3.769 126.344 3.68788C125.636 2.71132 124.693 2.42273 123.784 2.37437C120.878 2.22461 117.965 2.20277 115.056 2.12477C111.762 2.03585 108.471 1.93445 105.178 1.84865C102.482 1.77845 99.7863 1.70201 97.0891 1.66301C94.253 1.62245 91.4153 1.61933 88.5793 1.60529C86.6807 1.59593 84.7807 1.61621 82.8822 1.58501C76.2178 1.47425 69.5535 1.33229 62.8892 1.23713C61.0437 1.21061 59.1951 1.34321 57.3481 1.32917C54.0846 1.30265 50.8195 1.21841 47.556 1.16069C44.8197 1.11233 42.0835 1.07957 39.3472 1.01405C37.1008 0.961008 34.8544 0.85337 32.608 0.80657C30.112 0.75509 27.6145 0.756647 25.1169 0.711407C23.2356 0.677087 21.3558 0.581927 19.4744 0.564767C18.5758 0.556967 17.6757 0.730131 16.7787 0.709851C15.5104 0.681771 14.2453 0.496127 12.977 0.477407C9.96307 0.430607 6.94759 0.44621 3.93211 0.42593C2.96335 0.41969 1.99458 0.363529 1.02583 0.361969C0.80587 0.361969 0.584351 0.493007 0.228668 0.608447C0.880745 1.15601 1.67168 1.47893 1.34563 2.43833C1.32848 2.48981 1.93375 2.88604 2.2551 2.89696C3.50935 2.93596 4.76671 2.88137 6.02251 2.86889C6.72139 2.86109 7.41871 2.86889 8.11759 2.86889C8.11759 2.98589 8.11759 3.10132 8.11759 3.21832H1.75279C1.75591 3.36028 1.75747 3.50069 1.76059 3.64265H17.8754C17.9019 3.61457 17.9269 3.58649 17.9534 3.55841C17.4589 3.42113 16.9643 3.28385 16.4714 3.14813C17.1781 3.19025 17.9799 2.76905 18.4573 3.81269C18.5618 4.04201 19.3823 3.98272 19.8722 3.99052C23.8767 4.04356 27.8812 4.08257 31.8873 4.11377C32.1525 4.11533 32.4193 4.02173 32.686 3.97337L32.6938 3.71129C29.3492 3.62237 26.0046 3.53188 22.6584 3.44296C22.6568 3.37276 22.6552 3.30413 22.6521 3.23393C23.0593 3.19649 23.468 3.12005 23.8752 3.12629C26.485 3.16685 29.0934 3.22925 31.7032 3.27137C32.257 3.28073 32.8186 3.28073 33.3615 3.19181C33.608 3.15125 33.817 2.88293 33.8654 2.84705C34.4207 2.95781 34.881 3.05453 35.3427 3.13877C35.4894 3.16529 35.6438 3.14189 35.7889 3.16841C37.1383 3.42269 38.4331 3.33844 39.7887 2.98588C40.9135 2.6926 42.0913 2.44613 43.372 2.92817C43.8775 3.11849 44.5483 3.48509 45.2503 3.39617C45.9476 3.30725 46.6652 3.37745 47.4109 3.37745C47.3953 3.13253 47.3828 2.93597 47.3672 2.71445C48.2065 2.71445 49.0005 2.67545 49.7852 2.73941C50.002 2.75657 50.1939 3.08105 50.2688 3.14813C50.793 2.94377 51.236 2.76905 51.8444 2.53193C51.7508 2.98745 51.7102 3.18089 51.6681 3.38213C52.8412 3.44297 53.9566 3.53969 55.072 3.54593C56.1562 3.55217 57.2389 3.46481 58.5103 3.41177C58.802 3.81737 59.1982 3.72533 59.5024 2.96249C59.7037 3.68945 60.6397 3.79241 61.1779 3.33377C61.6318 3.49133 61.9594 3.6988 62.2917 3.7066C63.8236 3.74248 65.3555 3.72221 66.8875 3.72221C66.8875 3.84701 66.8875 3.97025 66.8875 4.09505H59.0422C59.0422 4.23857 59.0422 4.38208 59.0438 4.5256H74.6828C74.6937 4.47412 74.7046 4.42108 74.7155 4.3696C74.0151 4.33216 73.3147 4.27757 72.6127 4.26041C71.8124 4.24169 71.0121 4.25573 70.2118 4.25573C70.2025 4.16213 70.1947 4.06853 70.1853 3.97493C70.3897 3.93593 70.594 3.86729 70.7984 3.86573C72.31 3.84857 73.8232 3.87197 75.3349 3.81581C75.6079 3.80489 75.8575 3.47105 76.1383 3.31973C76.3676 3.19649 76.625 3.12473 76.7997 3.05609C76.8184 3.36965 76.834 3.61145 76.8481 3.85169C77.0883 3.73781 77.4066 3.68633 77.5563 3.49913C78.0259 2.91413 78.5859 2.94845 78.8683 3.42893C79.3924 3.33065 79.8183 3.19805 80.2442 3.19181C80.4439 3.18869 80.6482 3.4258 80.9025 3.5896C81.3736 3.01396 82.9211 3.13721 83.2456 3.90473C87.2517 4.04357 91.2313 4.18085 95.2108 4.31969C95.2108 4.39925 95.2108 4.47881 95.2124 4.55837C93.0518 4.55837 90.8912 4.55837 88.729 4.55837C86.5669 4.55837 84.4687 4.55837 82.3393 4.55837C82.3346 4.62077 82.3315 4.68317 82.3268 4.74713C83.4687 4.81733 84.6091 4.93433 85.751 4.94993C89.1767 4.99673 92.6025 4.99049 96.0283 5.02793C98.841 5.05757 101.654 5.13245 104.468 5.16209C105.591 5.17301 106.716 5.11528 107.841 5.09032V5.09345L107.848 5.09032Z" fill="#CDDD20"/>
        </svg>
        `;

        const contentText = [
            { text: "P,A,S,*,O,U,F", break: false },
            {
                text: "P,E,U,T,*,M,I,E,U,X,*,F,A,I,R,E",
                break: true,
                breakAfter: 10,
            },
            {
                text: "C,*,E,S,T,*,P,A,S,*,E,N,C,O,R,E,*,C,A",
                break: true,
                breakAfter: 10,
            },
            { text: "P,A,S,*,M,A,L", break: false },
            { text: "P,R,E,S,Q,U,E", break: false },
            { text: "L,A,*,O,N,*,E,S,T,*,B,O,N", break: true, breakAfter: 10 },
            { text: "T,*,E,S,*,U,N,*,B,O,S,S", break: false },
        ];

        textSteps.forEach((text, index) => {
            const rawText = contentText[index].text;

            letterSource.getLetters(rawText).then((letters) => {
                const container = text;

                const characters = rawText.split(",");

                let svgLetters = [];
                characters.forEach((char, i) => {
                    if (char === "*") {
                        svgLetters.push(`<b class="space"></b>`);
                    } else {
                        svgLetters.push(`<span>${letters[i]}</span>`);
                    }
                });

                let svgHTML = "";
                if (contentText[index].break && contentText[index].breakAfter) {
                    const breakIndex = contentText[index].breakAfter;

                    const firstLine = svgLetters.slice(0, breakIndex).join("");
                    const secondLine = svgLetters.slice(breakIndex).join("");

                    svgHTML = `
                        <div class="linesWrapper">
                            <div class="lettersLine">${firstLine}</div>
                            <div class="lettersLine">${secondLine}</div>
                        </div>
                    `;
                } else {
                    svgHTML = `
                        <div class="linesWrapper">
                            <div class="lettersLine">${svgLetters.join(
                                ""
                            )}</div>
                        </div>
                    `;
                }

                container.innerHTML += `
                    <div class="lm-typo index z-9">
                        ${svgHTML}
                    </div>
                `;

                // Animer les lettres
                const tlLetterSourceAnime =
                    prepareAnimationHandler.animeLetterSource(
                        container,
                        16,
                        0,
                        "#CDDD20",
                        1.5
                    );
                tlLetterSourceAnime.play();
            });
        });

        for (let i = 0; i < numLines; i++) {
            const svgWrapper = document.createElement("div");
            svgWrapper.innerHTML = svgLine;
            const svg = svgWrapper.firstElementChild;
            const verticalPosition = offset + i * (availableHeight / numLines);

            svg.style.position = "absolute";
            svg.style.top = `${verticalPosition}px`;
            svg.style.left = `0`;

            container.appendChild(svg);
        }

        this.setItemsAttributes();
        this.setupClickListeners();
        this.calculateLineHeight();
    }
}
